.MODEL SMALL
.STACK
.DATA
TITULO DB 10, 13, 7, "CONVERSOR DE DECIMAL A HEXADECIMAL","$"
INGRESAR DB 10,13,7,"INGRESA UN NUMERO DECIMAL: ","$"
RESULTADO DB 10,13,7,"EL RESULTADO EN HEXADECIMAL ES: ", "$"
SALTO DB 10,13,7,"$"  

D1 DB 0
D2 DB 0
D3 DB 0
D4 DB 0
D5 DB 0
D6 DB 0
D7 DB 0
D8 DB 0
D9 DB 0
D10 DB 0
D11 DB 0
D12 DB 0
D13 DB 0
D14 DB 0
D15 DB 0
D16 DB 0
DM DD 0
UM DD 0
C DD 0
D DB 0
U DB 0
NUMERO DD 0;PARA ALMACENAR EL NUMERO
N DB 0
AUXI DD 0
AUXI2 DD 0
AUXI3 DB 0
PESO DD 0

.CODE 

    MOV AX,@DATA
    MOV DS, AX
    MOV AH,09H
    LEA DX,TITULO
    INT 21H  
 
   
                              
 
   DECHEXA:
   MOV AH,09H
   LEA DX,INGRESAR
   INT 21H
   CALL DECIMALES 
   XOR DX,DX
   MOV AX,0
   MOV AX,NUMERO
   CMP AX,255
   JBE MENOR2 
   
   
   MENOR2:
   MOV N,AL
   MOV BL,16
   CALL HEXA
   MOV AH,AUXI3
   MOV D1,AH
   MOV N,AL
   CMP N,0
   JE IMPRIMIRH
   MOV AH, AUXI3
   MOV D2,AH
   MOV N, AL
   CMP N,0 
    ;SEPARACION
   JE IMPRIMIRH
   JMP IMPRIMIRH
   
   HEXA PROC
    DIV BL 
    MOV AUXI3,AH
    MOV N,0
    MOV N,AL
    RET
    HEXA ENDP
   
   IMPRIMIRH:
   MOV AH,09H
   LEA DX,RESULTADO
   INT 21H
   
   CMP D2,10
   JE AGREGARA3
   CMP D2,11
   JE AGREGARB3
   CMP D2,12
   JE AGREGARC3
   CMP D2,13
   JE AGREGARD3
   CMP D2,14
   JE AGREGARE3
   CMP D2,15
   JE AGREGARF3
   JMP IMH3
    
   AGREGARA3:
   MOV D2,11H
   MOV AH,02H
   MOV Dl,D2
   ADD Dl,30H
   INT 21H
   JMP H4
   AGREGARB3:
   MOV D2,12H
   MOV AH,02H
   MOV Dl,D2
   ADD Dl,30H
   INT 21H
   JMP H4
   AGREGARC3:
   MOV D2,13H
   MOV AH,02H
   MOV Dl,D2
   ADD Dl,30H
   INT 21H
   JMP H4
   AGREGARD3:
   MOV D2,14H
   MOV AH,02H
   MOV Dl,D2
   ADD Dl,30H
   INT 21H
   JMP H4
   AGREGARE3:
   MOV D2,15H
   MOV AH,02H
   MOV Dl,D2
   ADD Dl,30H
   INT 21H
   JMP H4
   AGREGARF3:
   MOV D2,16H
   MOV AH,02H
   MOV Dl,D2
   ADD Dl,30H
   INT 21H
   JMP H4   
   
   IMH3:
   MOV AH,02H
   MOV Dl, D2
   ADD Dl,30H
   INT 21H
   JMP H4 
   
   H4:
   CMP D1,10
   JE AGREGARA4
   CMP D1,11
   JE AGREGARB4
   CMP D1,12
   JE AGREGARC4
   CMP D1,13
   JE AGREGARD4
   CMP D1,14
   JE AGREGARE4
   CMP D1,15
   JE AGREGARF4
   JMP IMH4
    
   AGREGARA4:
   MOV D2,11H
   MOV AH,02H
   MOV Dl,D1
   ADD Dl,30H
   INT 21H
   JMP LIMPIAR
   AGREGARB4:
   MOV D2,12H
   MOV AH,02H
   MOV Dl,D1
   ADD Dl,30H
   INT 21H
   JMP LIMPIAR
   AGREGARC4:
   MOV D2,13H
   MOV AH,02H
   MOV Dl,D1
   ADD Dl,30H
   INT 21H
   JMP LIMPIAR
   AGREGARD4:
   MOV D2,14H
   MOV AH,02H
   MOV Dl,D1
   ADD Dl,30H
   INT 21H
   JMP LIMPIAR
   AGREGARE4:
   MOV D2,15H
   MOV AH,02H
   MOV Dl,D1
   ADD Dl,30H
   INT 21H
   JMP LIMPIAR
   AGREGARF4:
   MOV D2,16H
   MOV AH,02H
   MOV Dl,D1
   ADD Dl,30H
   INT 21H
   JMP LIMPIAR   
   
   IMH4:
   MOV AH,02H
   MOV Dl, D1
   ADD Dl,30H
   INT 21H
   JMP LIMPIAR 
   

     
   DECIMALES PROC 
   MOV AH,01H
   INT 21H
   SUB AX,130H
   MOV C, AX
   MOV AH, 01H
   INT 21H 
   SUB AX,130H
   MOV D,AL
   MOV AH,01H
   INT 21H
   SUB AL,30H
   MOV U,AL
 
 MULTIPC:
     XOR AX,AX
     CMP C,0
     JZ MULTIPD
     MOV AX,00
     MOV AX,C
     MOV BX,100
     MUL BX
     MOV C,0
     MOV C,AX
     
 MULTIPD:
     XOR AX,AX
     CMP D,0
     JZ ARMAR
     MOV AX,00
     MOV AL,D
     MOV BL,10
     MUL BL
     MOV D,0
     MOV D,AL
     
 ARMAR:
     XOR AX,AX
     MOV AX,C
     ADD NUMERO,AX
     MOV AX,0
     MOV AL,D
     ADD NUMERO,AX
     MOV AX,0
     MOV AL,U
     ADD NUMERO,AX 
     
  RET
 DECIMALES ENDP
   
   LIMPIAR:
   MOV AH,09H
   LEA DX, SALTO
   INT 21H
   MOV AX,0
   MOV BX,0
   MOV CX,0
   XOR DX,DX
   XOR CX,CX
   MOV NUMERO,0
   MOV N,0
   MOV AUXI,0
   MOV AUXI2,0
   JMP DECHEXA: 
   
  SALIR:
   MOV AX,4C00H
   INT 21H
   END
   



